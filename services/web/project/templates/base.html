<html>
    <head>
        <title>{{page_name}}</title>
        <link rel="stylesheet" href="/static/uPlot.min.css">
        <link rel="shortcut icon" type="image/jpg" href="/static/ko-chaj.png"/>
        <script src="static/uPlot.iife.min.js"></script>
        <script src="static/utils.js"></script>
        <script src='https://cdn.plot.ly/plotly-2.3.0.min.js'></script>
        <link rel='stylesheet' href='/static/style.css'>
        <link rel='stylesheet' href='/static/layout.css'>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        {% if refresh %}
        <meta http-equiv="refresh" content="{{ refresh }}">
        {% endif %}
        <link rel="stylesheet" href="/static/gh-fork-ribbon.css">
    </head>
    <body>
        <a class="github-fork-ribbon right-top" href="https://github.com/mikeizbicki/novichenko" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>
        <header class=grid>
        <div class="header logo">
        <img src='/static/en-chajda.png' width=120px height=30px>
        </div>
        <div class="header search box">
        <form id=form_search action='/search' method='get'>
            <input type=text name=query value='{{query}}' />
            {% if time_lo_args %}
            <input type=hidden name=time_lo value='{{time_lo_args}}' />
            {% endif %}
            {% if time_hi_args %}
            <input type=hidden name=time_hi value='{{time_hi_args}}' />
            {% endif %}
            <button type="submit"><i class="fa fa-search"></i></button>
            <select name="lang" id="lang">
              <option value="en" {%if lang=="en" %}selected{%endif%}>en</option>
              <option value="es" {%if lang=="es" %}selected{%endif%}>es</option>
            </select>
        </form>
        </div>
        </header>
        <main class=grid>
        {% block content %}
        {% endblock %}
        </main>
        <!--
        {{comments|safe}}
        -->
		<footer>
        <div class=debug>
            <input id="debug_collapse" class="toggle" type="checkbox" checked>
            <label for="debug_collapse" class="lbl-toggle dark">debug information</label>
            <div class=collapsible-content>
                <ul>
                <li>page render time: __EXECUTION_TIME__</li>
                <li>timers
                    <ul>
                    {%for timer in debug_timers %}
                    <li>{{timer['name']}}: {{'%.3f'|format(timer['runtime'])}} seconds </li>
                    {%endfor%}
                    </ul>
                </li>
                <li>queries
                    {%for query in queries%}
                    <input id="query_{{query['name']}}" class="toggle" type="checkbox">
                    <label for="query_{{query['name']}}" class="lbl-toggle">{{query['name']}} ( {{'%.3f'|format(query['runtime'])}} seconds )</label>
                    <div class=collapsible-content>
                        <ul>
                            <li>
                                <strong>sql</strong>
                                <div class=code>{{query["sql"]}}</div>
                            </li>
                            <li>
                                <strong>explain</strong>
                                <div class=code>{{query["explain"]}}</div>
                            </li>
                            <li>
                                <strong>binds</strong>
                                <table>
                                    <!--tr><td>bind parameter</td><td>value</td></tr>-->
                                    {% for k,v in query['binds'].items() %}
                                    <tr><td><span class=code>:{{k}}</span></td><td><span class=code>=</span></td><td><span class=code>{{v}}</span></td></tr>
                                    {% endfor %}
                                </table>
                            </li>
                    </div>
                    {%endfor%}
                </li>
                </ul>
            </div>
        </div>
		</footer>
    </body>
</html>
